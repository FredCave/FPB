function onYouTubeIframeAPIReady(){console.log("onYouTubeIframeAPIReady");var a=$("#player"),b=a.attr("data-id"),c=a.attr("data-src"),d=a.attr("data-origin"),e=c.split("?")[0]+"?enablejsapi=1&origin="+d;a.attr("src",e),player=new YT.Player("player",{events:{onReady:controllerHome.onPlayerReady,onStateChange:controllerHome.onPlayerStateChange,onError:controllerHome.onPlayerError},playerVars:{playlist:b,loop:1}}),$("#home_video_button .pause").on("click",function(){controllerHome.pauseVideo()})}var navInterval,timerRunning=!1,controllerPage={currentSection:1,wheelBlock:!1,passAttempts:0,clickBlock:!1,pageInit:function(){console.log("controllerPage.pageInit"),viewPage.init(),this.linksInit(),controllerHome.init(),controllerSections.sectionsInit(),this.sectionCheckBind(),this.tradInit()},linksInit:function(){$("#wrapper a").each(function(){"http"==$(this).attr("href").substring(0,4)&&$(this).attr("target","_blank")})},getCurrent:function(){return this.currentSection},updateCurrent:function(a){console.log("controllerPage.updateCurrent",a),$.isNumeric(a)&&(this.currentSection=a)},getWheelBlock:function(){return this.wheelBlock},toggleWheelBlock:function(){this.wheelBlock=!this.wheelBlock},navFixManager:function(){if(console.log("controllerPage.navFixManager"),$(window).width()>500){var a=$("#top_header").outerHeight(),b=Math.floor($("#bottom_header_unfixed")[0].getBoundingClientRect().top),c=$("#main_logo").outerHeight(),d=b+$("#bottom_header_unfixed").height()-c;a>=b?viewPage.navFix(a):viewPage.navUnfix(),a+30>=d?viewPage.logoFix():viewPage.logoUnfix()}else viewPage.navFix(a)},scrollManager:function(a){console.log("controllerPage.scrollManager");var b=$(".current"),c=this.getCurrent();1==c&&this.navFixManager(),a>0?b.scrollTop()+b.innerHeight()>=b[0].scrollHeight-10?6!=c&&this.scrollDown(a):viewPage.scrollUnblock(b):0>a&&this.scrollUp(a)},scrollDown:function(a){console.log("controllerPage.scrollDown");var b=$(".current"),c=parseInt(b.css("transform").split(",")[5]),d=$(".current").outerHeight(),e=1,f=c-a*e;viewPage.scrollBlock(b),d+c>=40?viewPage.currentTransform(f):this.switchClasses("down")},scrollUp:function(a){console.log("controllerPage.scrollUp",$(".current").css("transform"));var b,c=$(".current"),d=parseInt(c.css("transform").split(",")[5]);$(".current").outerHeight();viewPage.scrollBlock(c),0>d&&!this.getWheelBlock()?(b=d-a,b>=0&&(b=0),viewPage.currentTransform(b)):0!=d||this.getWheelBlock()||(c.scrollTop()<=0&&1!=this.getCurrent()?this.getWheelBlock()||(this.toggleWheelBlock(),this.switchClasses("up"),b=d+a,this.navFixManager(),setTimeout(function(){controllerPage.toggleWheelBlock()},500)):0!=c.scrollTop()&&viewPage.scrollUnblock(c))},switchClasses:function(a){console.log("controllerPage.switchClasses"),"down"===a?(viewPage.switchNext(),viewPage.contentReveal()):"up"===a&&viewPage.switchPrev(),this.updateCurrent($(".current").attr("data-content"))},navToSection:function(a){console.log("controllerPage.navToSection",a);a>this.getCurrent()?viewPage.multipleTransform(a,"prev"):a<=this.getCurrent()&&viewPage.multipleTransform(a,"next"),viewPage.switchTarget(a),this.updateCurrent(a),viewPage.contentReveal()},imageManager:function(a){console.log("controllerPage.imageManager",a),a.find("img").not(".main_logo, .arrow_img").each(function(a){controllerPage.imageCalc($(this))})},imageCalc:function(a){var b,c,d=a,e=d.attr("src");a.is("img")||(a.has("img").length?(d=a.find("img"),e=d.attr("src")):a.has(".bg_image").length&&(d=a.find(".bg_image"),e=d.attr("data-src"))),c=d.hasClass("bg_image")?$(window).width()/$(window).height()<parseInt(d.attr("data-ratio"))?$(window).height()*d.attr("data-ratio"):$(window).width():d.width(),b=300>=c?d.attr("data-thm"):c>300&&600>=c?d.attr("data-med"):c>600&&900>=c?d.attr("data-lrg"):d.attr("data-xlg"),b!==e&&viewPage.imageRender(d,b)},sectionCheck:function(a){console.log("controllerPage.sectionCheck"),parseInt($(a.target).parents("section").attr("data-content"))!==controllerPage.getCurrent()&&$.isNumeric(parseInt($(a.target).parents("section").attr("data-content")))&&controllerPage.navToSection(parseInt($(a.target).parents("section").attr("data-content")))},sectionCheckBind:function(){console.log("controllerPage.sectionCheckBind"),$("section").on("click",function(a){$("body").hasClass("mobile")||0===$(a.target).parents("#bottom_header_unfixed").length&&controllerPage.sectionCheck(a)})},tradInit:function(){console.log("controllerPage.tradInit"),$("section").on("click",".trad_default_reveal",function(a){a.preventDefault(),controllerPage.tradDefaultReveal(a)})},tradDefaultReveal:function(a){console.log("controllerPage.tradDefaultReveal",$(a.target));var b=0,c=$(a.target).next(".trad_default_hidden");c.children().each(function(){b+=$(this).height()}),$(a.target).hide().prev("p").hide(),c.css("height",b),setTimeout(function(){c.css("height","auto")},1e3)}},viewPage={init:function(){$("html,body").animate({scrollTop:0},500),this.touchInit(),controllerMobile.touchScreenCheck(),this.navInit(),this.contentReveal($("#section_2"))},contentReveal:function(a){console.log("viewPage.contentReveal",a),"undefined"==typeof a&&(a=$(".current").next()),a.show().addClass("loaded"),controllerPage.imageManager(a)},navHighlight:function(){console.log("viewPage.navHighlight"),_.throttle(function(){if($("#bottom_header a").removeClass("highlight"),1!==controllerPage.getCurrent()){var a=$(".current"),b=parseInt(controllerPage.getCurrent());$(window).height()+parseInt(a.css("transform").split(",")[5])<140?$("#bottom_header [data-id='"+(b+1)+"']").addClass("highlight"):$("#bottom_header [data-id='"+b+"']").addClass("highlight")}},500)()},touchInit:function(){console.log("viewPage.touchInit"),$("html,body").on("mousewheel wheel DOMMouseScroll",function(a){if(console.log(451,a.target),!$(a.target).parents(".home_text").length){if(!$("#wrapper").hasClass("wheel_block")){var b=a.originalEvent.deltaY;controllerPage.scrollManager(b)}viewPage.navHighlight()}})},scrollBlock:function(a){a.addClass("scroll_block")},scrollUnblock:function(a){a.removeClass("scroll_block")},currentTransform:function(a){$(".current").css({"-webkit-transform":"translateY("+a+"px)","-ms-transform":"translateY("+a+"px)",transform:"translateY("+a+"px)"})},multipleTransform:function(a,b){console.log("viewPage.multipleTransform",a,b),timerRunning||(navInterval=setInterval(function(){timerRunning=!0,controllerPage.navFixManager(),viewPage.navHighlight()},100)),controllerPage.toggleWheelBlock();var c=$("#section_"+a).prevAll();"next"===b&&(c=$("#section_"+a).nextAll().andSelf()),viewPage.contentReveal($("#section_"+a)),c.each(function(){viewPage.contentReveal($(this));var a=0-$(this).outerHeight();"next"===b&&(a=0),$(this).css({transition:"transform 1s","-webkit-transform":"translateY("+a+"px)","-ms-transform":"translateY("+a+"px)",transform:"translateY("+a+"px)",display:"block"})}),setTimeout(function(){console.log("clearInterval",navInterval),clearInterval(navInterval),timerRunning=!1,controllerPage.toggleWheelBlock(),$("section").css("transition","")},1e3)},switchNext:function(){$(".current").removeClass("current").next().addClass("current").removeClass("scroll_block"),$(".previous").removeClass("previous"),$(".current").prev().addClass("previous")},switchPrev:function(){$(".current").removeClass("current"),$(".previous").removeClass("previous").addClass("current").removeClass("scroll_block"),$(".current").prev().addClass("previous")},switchTarget:function(a){$(".current").removeClass("current"),$(".previous").removeClass("previous"),$("#section_"+a).addClass("current").prev().addClass("previous")},navFix:function(){$("#bottom_header").appendTo($("#bottom_header_fixed"))},navUnfix:function(){$("#bottom_header").appendTo($("#bottom_header_unfixed"))},logoFix:function(a){$("#main_logo").appendTo($("#bottom_header_fixed")).css({position:"fixed",bottom:"initial"})},logoUnfix:function(){$("#main_logo").appendTo($("#bottom_header_unfixed")).css({position:"",top:"",bottom:""})},navInit:function(){$("#bottom_header a").on("click",function(a){a.preventDefault(),$("body").hasClass("mobile")?controllerMobile.navClickHandler($(this).data("id")):viewPage.navClickHandler($(this).data("id"))})},navClickHandler:function(a){controllerPage.clickBlock||(console.log("navClickHandler"),controllerPage.clickBlock=!0,a===controllerPage.getCurrent()?$(".current").animate({scrollTop:0},500):controllerPage.navToSection(a),setTimeout(function(){controllerPage.clickBlock=!1},1e3))},scrollToTarget:function(a,b){console.log("viewPage.scrollToTarget"),setTimeout(function(){var b=0;$(a).parents(".list").length?b=$(a).parents(".list").position().top:$("#coll_filter").length&&(b=$("#coll_list").position().top);var c=$(a).position().top+b,d=$("#top_header").outerHeight()+$("#bottom_header").outerHeight()+20;$(".current").animate({scrollTop:c-d},500)},b)},currentScrollToTop:function(){console.log("viewPage.currentScrollToTop"),$(".current").css({transition:"all 1s","-webkit-transform":"","-ms-transform":"",transform:""},500),setTimeout(function(){$(".current").css("transition","")},1e3)},imageRender:function(a,b){if(console.log("viewPage.imageRender"),a.hasClass("bg_image")){var c="url('"+b+"')";a.css({"background-image":c})}else a.attr("src",b);setTimeout(function(){a.removeClass("blurred")},500)}};$(document).on("ready",function(){controllerPage.pageInit()});var controllerHome={init:function(){console.log("controllerHome.init"),$("#player").length?this.loadVideo():$("#home_slideshow").length&&this.slideInit(),viewHome.textInit()},slideInit:function(){console.log("controllerHome.slideInit"),controllerPage.imageCalc($("#home_slideshow").find(".visible")),controllerPage.imageCalc($("#home_slideshow").find(".visible").next()),$(".arrow a").fadeIn().on("click",function(a){a.preventDefault(),"right_arrow"===$(this).parent().attr("id")?viewHome.slide("right"):viewHome.slide("left")})},homeLinkOpen:function(a){console.log("controllerHome.homeLinkOpen");var b=a.parents(".home_text").data("link"),c=b.split("_")[1],d=b.split("_")[2];controllerPage.navToSection(c),setTimeout(function(){$("[data-link="+d+"]").trigger("click")},1e3)},onPlayerReady:function(a){console.log("onPlayerReady"),a.target.playVideo(),a.target.mute()},onPlayerStateChange:function(a){console.log("onPlayerStateChange"),a.data==YT.PlayerState.PLAYING&&playVideo()},onPlayerError:function(a){console.log("onPlayerError")},playVideo:function(){console.log("playVideo"),$("#player").removeClass("paused").fadeIn(),$("#home_video_button").find("play").hide(),$("#home_video_button").find("pause").show(),$("#home_video_button").fadeIn()},pauseVideo:function(){console.log("pauseVideo"),player.pauseVideo(),$("#home_video_button").fadeOut(),$("#home_video_button").find("pause").hide(),$("#home_video_button").find("play").show(),$("#player").addClass("paused")},loadVideo:function(){if(console.log("controllerHome.loadVideo"),$("#player").length){var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}}},viewHome={slide:function(a){console.log("viewHome.slide",a);var b,c=$("#home_slideshow"),d=c.find(".visible"),e=d.next();"left"===a&&(e=d.prev()),0===e.length&&(e="left"===a?c.find("li:last-child"):c.find("li:first-child")),d.removeClass("visible"),e.addClass("visible"),b="right"===a?$(".visible").next():$(".visible").prev(),controllerPage.imageCalc(b)},textInit:function(){if(console.log("viewHome.textInit"),$(window).width()>500){var a,b=$(".home_text_wrapper").css("width"),c=$(".home_text_wrapper").height(),d=!1;if(console.log(221,c),c>.65*$(window).height()?(maxH="50%",overflow="scroll",d=!0):(maxH="auto",overflow="auto"),d){var e=25*Math.random();a=e+40/$(window).height()*100,console.log(236,e,40/$(window).height())}else a=Math.floor(62*Math.random())+5;console.log(331,c,a,d);var f=Math.random()*(1-parseInt(b)/$(window).width())*100;$(".home_text_wrapper").css({left:f+"%",top:a+"%",height:maxH}).fadeIn(),$(".home_text").css({overflow:overflow})}else{var g=$(".home_text_wrapper").height();$(".home_text").css({height:g,overflow:"auto"}),$(".home_text_wrapper").fadeIn()}$(".home_close").on("click",function(){$(".home_text_wrapper").hide()}),$(".text_link a").on("click",function(a){console.log($(this).attr("href")),""===$(this).attr("href")&&(a.preventDefault(),controllerHome.homeLinkOpen($(this)))})}},controllerSections={sectionsInit:function(){viewCollection.passwordInit(),this.bannerBind(),this.gridInit(),this.archiveInit()},bannerBind:function(){console.log("bannerBind"),$(".banner_link").on("click",function(a){a.preventDefault(),viewSections.bannerOpen($(this))})},archiveInit:function(){$("#archive_filter select").on("change",function(a){var b=$(this).val();console.log(52,b);$(this).parents(".filter_wrapper").next(".image_grid");controllerSections.archiveFilter(b),controllerSections.gridInit()})},archiveFilter:function(a){console.log("controllerSections.archiveFilter"),"0"===a?$(".archive_post").show().removeClass("hidden"):($(".archive_post").hide().addClass("hidden"),$(".archive_post").each(function(){$(this).attr("data-cat").indexOf(a)>-1&&$(this).show()}))},gridInit:function(){console.log("controllerPage.gridInit"),$(".image_cell_toggle").on("click",function(){controllerSections.gridOpen($(this))}),$(".image_grid").on("click",".grid_close",function(){controllerSections.gridClose($(this))}),$(".image_grid").each(function(){var a=$(this).attr("data-col"),b=1,c=1,d=$(this).find(".image_cell").not(".hidden").length;$(window).width()<=500?(a=1,$(this).attr("data-col",1),console.log(83,"1 col")):$(window).width()>500&&$(window).width()<=900&&(a=2,$(this).attr("data-col",2),console.log(88,"2 cols")),controllerSections.gridReset($(this)),$(this).find(".image_cell").not(".hidden").each(function(){$(this).attr("data-row",c),(b%a===0||b===d)&&($(this).css({"margin-right":"0%"}),$(this).after("<div class='clear'></div><div class='grid_large row_"+c+"'><div class='image_wrapper'></div><div class='grid_close'></div></div>"),c++),b++})})},gridReset:function(a){console.log("controllerPage.gridReset"),a.find(".clear").remove(),a.find(".grid_large").remove()},gridOpen:function(a){if(console.log(136,a.parents("#coll_list").length),$(window).width()>500||a.parents("#coll_list").length>0){console.log("controllerSections.gridOpen");var b=a.parents(".image_grid"),c=a.find("img"),d=a.parents("li").attr("data-row"),e=b.find(".row_"+d),f=e.find(".image_wrapper");if(viewSections.closeImagesInGrid(b),viewPage.scrollToTarget(e,1e3),a.parents("#coll_list").length?a.find(".hidden_content").clone().removeClass("hide").appendTo(f):c.clone().appendTo(b.find(".row_"+d+" .image_wrapper")),a.parents("#coll_list").length)var c=e.find(".hidden_content"),g=e.find(".hidden_content").height(),d=a.attr("data-row");else{var g=parseInt(c.attr("height"))/parseInt(c.attr("width"))*parseInt(b.width()),d=a.parents("li").attr("data-row");c.hasClass("portrait")&&(g=.67*g)}if(e.css({height:g+28}),console.log(182,g),controllerPage.imageCalc(e.find("img")),viewSections.fadeInGridClose(e),a.parents("#publications_list").length){$("#publications_list").height();$("#publications_list").css("height","auto")}}},gridClose:function(a){console.log("controllerPage.gridClose"),a.fadeOut(),a.parents(".grid_large").css("height","0").find(".image_wrapper").empty().removeClass("full").addClass("empty")}},viewSections={openIframes:function(a){var b=$("#"+a).find("iframe"),c=b.width(),d=b.attr("height")/b.attr("width");target.css("height",c*d),b.attr("src",b.data("src"))},bannerReveal:function(a){console.log("viewSections.bannerReveal");var b=a.height(),c=a.parents("section"),d=$("#publications_list").position().top,e=$("#top_header").outerHeight();console.log(212,d-e),c.find(".list_post").hide().removeClass("selected"),a.show().addClass("selected"),a.parents(".list").css("height",b),setTimeout(function(){a.parents(".list").css("height","auto"),console.log(242,d),c.animate({scrollTop:d-e-35},500)},750)},bannerOpen:function(a){console.log("controllerSections.bannerOpen"),controllerPage.sectionCheck(a);var b=a.data("link");$("body").hasClass("mobile")?controllerMobile.bannerReveal($("#"+b)):this.bannerReveal($("#"+b))},fadeInGridClose:function(a){a.removeClass("empty").addClass("full").find(".grid_close").fadeIn()},closeImagesInGrid:function(a){console.log("viewPage.closeImagesInGrid",a),a.find(".grid_large").css("height","0").find(".image_wrapper").empty().removeClass("full").addClass("empty")}},controllerCollection={submitCheck:function(a){a&&13==a.keyCode&&controllerCollection.passwordCheck()},getPassAttempts:function(){return controllerPage.passAttempts},updatePassAttempts:function(){controllerPage.passAttempts++},passwordCheck:function(){console.log("controllerCollection.passwordCheck");var a=$("#pword_form").data("hash"),b=$.md5($("#pword_input").val()),c=5;this.getPassAttempts()<=c?(a===b?(console.log("Success."),$("#coll_password").remove(),collLoad()):$("#error_message").text($("#error_message").attr("data-trad-incorrect-es")),this.updatePassAttempts()):$("#error_message").text($("#error_message").attr("data-trad-too-many-es"))},allFiltersReset:function(a){console.log("controllerCollection.allFiltersReset")},textSearch:function(a){console.log("controllerCollection.textSearch",a),controllerSections.gridReset($("#coll_list")),$("#coll_letters").find(".clicked").removeClass("clicked"),$(".filter").find("select").prop("selectedIndex",0);var b=$(".coll_post");b.each(function(){var b=$(this).data("info")+$(this).find("h1").text();-1!==b.toLowerCase().indexOf(a.toLowerCase())?$(this).show().removeClass("hidden"):$(this).hide().addClass("hidden")}),controllerSections.gridInit()},lettersInit:function(){console.log("controllerCollection.lettersInit"),$("#coll_letters li").each(function(){var a=$(this).find("a").text().toLowerCase();$("."+a).length&&$(this).addClass("active")})},letterClick:function(a){if(console.log("controllerCollection.letterClick",a),$(".filter").find("select").prop("selectedIndex",0),$("#search_input")[0].value="",a.parent().hasClass("active")){var b=a.text().toLowerCase();$(".coll_post").hide().addClass("hidden"),$(".coll_post").each(function(){$(this).hasClass(b)&&$(this).show().removeClass("hidden")})}$("#coll_letters").find(".clicked").removeClass("clicked"),a.parent().addClass("clicked"),controllerSections.gridInit()},dropDown:function(a){var b=a.val();controllerSections.gridReset($("#coll_list")),a.parents(".filter").siblings().find("select").prop("selectedIndex",0),$("#coll_letters").find(".clicked").removeClass("clicked"),$("#search_input")[0].value="","0"===b?(console.log("Show all posts."),$(".coll_post").show().removeClass("hidden")):(console.log("Show only: ",b),$(".coll_post").hide().addClass("hidden"),$(".coll_post").each(function(){var a=$(this).attr("data-class");a.indexOf(b)>=0&&$(this).show().removeClass("hidden")})),controllerSections.gridInit()},ajaxSuccess:function(a){console.log("controllerCollection.ajaxSuccess"),$("#coll_content").html(a),controllerPage.imageManager($("#section_6")),controllerSections.gridInit(),viewCollection.onAjaxSuccess()}},viewCollection={passwordInit:function(){$("#pword_form .text_input").on("keypress",function(a){a&&13==a.keyCode&&controllerCollection.passwordCheck(a)})},onAjaxSuccess:function(){console.log("viewCollection.onAjaxSuccess");var a=$("#coll_content"),b=$("#coll_list").offset().top;controllerCollection.lettersInit(),a.on("click","#coll_letters a",function(a){a.preventDefault(),controllerCollection.letterClick($(this))}).on("keyup","#search_input",function(){controllerCollection.textSearch($("#search_input").val())}).on("change","#coll_filter select",function(a){a.preventDefault(),controllerCollection.dropDown($(this))}),setTimeout(function(){a.find(".content_wrapper").fadeIn(2e3)},5e3),$("#wrapper").hasClass("mobile")&&$("html,body").animate({scrollTop:b},500),a.on("click",".image_cell_toggle",function(){controllerSections.gridOpen($(this))}),a.on("click",".grid_close",function(){controllerSections.gridClose($(this))})}},controllerMobile={touchScreenCheck:function(){console.log("controllerMobile.touchScreenCheck");var a=navigator.userAgent.toLowerCase(),b=Modernizr.touch||a.match(/(iphone|ipod|ipad)/)||a.match(/(android)/)||a.match(/(iemobile)/)||a.match(/iphone/i)||a.match(/ipad/i)||a.match(/ipod/i)||a.match(/blackberry/i)||a.match(/bada/i);b&&(console.log("isTouchDevice"),$("body").addClass("mobile"),this.init())},init:function(){console.log("controllerMobile.init"),$("#mobile_menu").on("click",function(){$("#mobile_menu").hasClass("clicked")?(controllerMobile.menuClose(),$("#mobile_menu").removeClass("clicked")):(controllerMobile.menuOpen(),$("#mobile_menu").addClass("clicked"))}),$("body.mobile").on("click","section",function(a){controllerMobile.menuClose()}),$("body.mobile").on("touchstart","section",_.throttle(function(a){controllerMobile.imageCheck()},1e3))},imageCheck:function(){console.log("controllerMobile.imageCheck");var a=$(window).scrollTop(),b=$(window).scrollTop()+$(window).height();$("section").each(function(){var c=$(this).offset().top,d=c+$(this).height();b>c&&d>a&&(console.log($(this).attr("id")),controllerPage.imageManager($(this)))})},navClickHandler:function(a){console.log("controllerMobile.navClickHandler");var b=$("#section_"+a).offset().top,c=$("#bottom_header").height();console.log(87,b,c),$("html,body").animate({scrollTop:b-c},500)},menuOpen:function(){console.log("controllerMobile.menuOpen"),$("#mobile_menu").hasClass("clicked")||($("#bottom_header_fixed").css({"-webkit-transform":"translateY(0)",transform:"translateY(0)"}),viewPage.navFix(),$("#mobile_menu").addClass("clicked"))},menuClose:function(){$("#bottom_header_fixed").css({"-webkit-transform":"",transform:""}),$("#mobile_menu").removeClass("clicked")},bannerReveal:function(a){console.log("controllerMobile.bannerReveal",a);var b=a.height(),c=a.parents("section"),d=c.find(".list").offset().top,e=$("#top_header").outerHeight();c.find(".list_post").hide().removeClass("selected"),a.show().addClass("selected"),a.parents(".list").css("height",b),setTimeout(function(){a.parents(".list").css("height","auto"),$("html,body").animate({scrollTop:d-e-20},500)},750)}};!function(a){"use strict";function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;16>c;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}a.md5=function(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}}("function"==typeof jQuery?jQuery:this),!function(a,b,c){function d(a,b){return typeof a===b}function e(){var a,b,c,e,f,g,h;for(var i in k)if(k.hasOwnProperty(i)){if(a=[],b=k[i],b.name&&(a.push(b.name.toLowerCase()),b.options&&b.options.aliases&&b.options.aliases.length))for(c=0;c<b.options.aliases.length;c++)a.push(b.options.aliases[c].toLowerCase());for(e=d(b.fn,"function")?b.fn():b.fn,f=0;f<a.length;f++)g=a[f],h=g.split("."),1===h.length?m[h[0]]=e:(!m[h[0]]||m[h[0]]instanceof Boolean||(m[h[0]]=new Boolean(m[h[0]])),m[h[0]][h[1]]=e),j.push((e?"":"no-")+h.join("-"))}}function f(a){var b=n.className,c=m._config.classPrefix||"";if(o&&(b=b.baseVal),m._config.enableJSClass){var d=new RegExp("(^|\\s)"+c+"no-js(\\s|$)");b=b.replace(d,"$1"+c+"js$2")}m._config.enableClasses&&(b+=" "+c+a.join(" "+c),o?n.className.baseVal=b:n.className=b)}function g(){return"function"!=typeof b.createElement?b.createElement(arguments[0]):o?b.createElementNS.call(b,"http://www.w3.org/2000/svg",arguments[0]):b.createElement.apply(b,arguments)}function h(){var a=b.body;return a||(a=g(o?"svg":"body"),a.fake=!0),a}function i(a,c,d,e){var f,i,j,k,l="modernizr",m=g("div"),o=h();if(parseInt(d,10))for(;d--;)j=g("div"),j.id=e?e[d]:l+(d+1),m.appendChild(j);return f=g("style"),f.type="text/css",f.id="s"+l,(o.fake?o:m).appendChild(f),o.appendChild(m),f.styleSheet?f.styleSheet.cssText=a:f.appendChild(b.createTextNode(a)),m.id=l,o.fake&&(o.style.background="",o.style.overflow="hidden",k=n.style.overflow,n.style.overflow="hidden",n.appendChild(o)),i=c(m,a),o.fake?(o.parentNode.removeChild(o),n.style.overflow=k,n.offsetHeight):m.parentNode.removeChild(m),!!i}var j=[],k=[],l={_version:"3.2.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(a,b){var c=this;setTimeout(function(){b(c[a])},0)},addTest:function(a,b,c){k.push({name:a,fn:b,options:c})},addAsyncTest:function(a){k.push({name:null,fn:a})}},m=function(){};m.prototype=l,m=new m;var n=b.documentElement,o="svg"===n.nodeName.toLowerCase(),p=l.testStyles=i;p("#modernizr { height: 50vh; }",function(b){var c=parseInt(a.innerHeight/2,10),d=parseInt((a.getComputedStyle?getComputedStyle(b,null):b.currentStyle).height,10);m.addTest("cssvhunit",d==c)}),e(),f(j),delete l.addTest,delete l.addAsyncTest;for(var q=0;q<m._q.length;q++)m._q[q]();a.Modernizr=m}(window,document),function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=t(d,f,4);var g=!A(c)&&s.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=u(c,d);for(var e=z(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,f){var g=0,h=z(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),s.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=F.length,d=a.constructor,e=s.isFunction(d)&&d.prototype||h,f="constructor";for(s.has(a,f)&&!s.contains(b,f)&&b.push(f);c--;)f=F[c],f in a&&a[f]!==e[f]&&!s.contains(b,f)&&b.push(f)}var e=this,f=e._,g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=i.bind,q=Object.create,r=function(){},s=function(a){return a instanceof s?a:this instanceof s?void(this._wrapped=a):new s(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports._=s):e._=s,s.VERSION="1.8.3";var t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?s.identity:s.isFunction(a)?t(a,b,c):s.isObject(a)?s.matcher(a):s.property(a)};s.iteratee=function(a,b){return u(a,b,1/0)};var v=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},w=function(a){if(!s.isObject(a))return{};if(q)return q(a);r.prototype=a;var b=new r;return r.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=Math.pow(2,53)-1,z=x("length"),A=function(a){var b=z(a);return"number"==typeof b&&b>=0&&y>=b};s.each=s.forEach=function(a,b,c){b=t(b,c);var d,e;if(A(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=s.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},s.map=s.collect=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},s.reduce=s.foldl=s.inject=a(1),s.reduceRight=s.foldr=a(-1),s.find=s.detect=function(a,b,c){var d;return d=A(a)?s.findIndex(a,b,c):s.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},s.filter=s.select=function(a,b,c){var d=[];return b=u(b,c),s.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},s.reject=function(a,b,c){return s.filter(a,s.negate(u(b)),c)},s.every=s.all=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},s.some=s.any=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},s.contains=s.includes=s.include=function(a,b,c,d){return A(a)||(a=s.values(a)),("number"!=typeof c||d)&&(c=0),s.indexOf(a,b,c)>=0},s.invoke=function(a,b){var c=k.call(arguments,2),d=s.isFunction(b);return s.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matcher(b))},s.findWhere=function(a,b){return s.find(a,s.matcher(b))},s.max=function(a,b,c){
var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},s.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(g>e||1/0===e&&1/0===f)&&(f=a,g=e)});return f},s.shuffle=function(a){for(var b,c=A(a)?a:s.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=s.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},s.sample=function(a,b,c){return null==b||c?(A(a)||(a=s.values(a)),a[s.random(a.length-1)]):s.shuffle(a).slice(0,Math.max(0,b))},s.sortBy=function(a,b,c){return b=u(b,c),s.pluck(s.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=u(c,d),s.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};s.groupBy=B(function(a,b,c){s.has(a,c)?a[c].push(b):a[c]=[b]}),s.indexBy=B(function(a,b,c){a[c]=b}),s.countBy=B(function(a,b,c){s.has(a,c)?a[c]++:a[c]=1}),s.toArray=function(a){return a?s.isArray(a)?k.call(a):A(a)?s.map(a,s.identity):s.values(a):[]},s.size=function(a){return null==a?0:A(a)?a.length:s.keys(a).length},s.partition=function(a,b,c){b=u(b,c);var d=[],e=[];return s.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},s.first=s.head=s.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:s.initial(a,a.length-b)},s.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},s.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:s.rest(a,Math.max(0,a.length-b))},s.rest=s.tail=s.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},s.compact=function(a){return s.filter(a,s.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=z(a);h>g;g++){var i=a[g];if(A(i)&&(s.isArray(i)||s.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};s.flatten=function(a,b){return C(a,b,!1)},s.without=function(a){return s.difference(a,k.call(arguments,1))},s.uniq=s.unique=function(a,b,c,d){s.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=z(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?s.contains(f,j)||(f.push(j),e.push(i)):s.contains(e,i)||e.push(i)}return e},s.union=function(){return s.uniq(C(arguments,!0,!0))},s.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);e>d;d++){var f=a[d];if(!s.contains(b,f)){for(var g=1;c>g&&s.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},s.difference=function(a){var b=C(arguments,!0,!0,1);return s.filter(a,function(a){return!s.contains(b,a)})},s.zip=function(){return s.unzip(arguments)},s.unzip=function(a){for(var b=a&&s.max(a,z).length||0,c=Array(b),d=0;b>d;d++)c[d]=s.pluck(a,d);return c},s.object=function(a,b){for(var c={},d=0,e=z(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},s.findIndex=b(1),s.findLastIndex=b(-1),s.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=z(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},s.indexOf=c(1,s.findIndex,s.sortedIndex),s.lastIndexOf=c(-1,s.findLastIndex),s.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=w(a.prototype),g=a.apply(f,e);return s.isObject(g)?g:f};s.bind=function(a,b){if(p&&a.bind===p)return p.apply(a,k.call(arguments,1));if(!s.isFunction(a))throw new TypeError("Bind must be called on a function");var c=k.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(k.call(arguments)))};return d},s.partial=function(a){var b=k.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===s?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},s.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=s.bind(a[c],a);return a},s.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return s.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},s.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=s.partial(s.delay,s,1),s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:s.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=s.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},s.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=s.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=s.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},s.wrap=function(a,b){return s.partial(b,a)},s.negate=function(a){return function(){return!a.apply(this,arguments)}},s.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},s.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},s.once=s.partial(s.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];s.keys=function(a){if(!s.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return E&&d(a,b),b},s.allKeys=function(a){if(!s.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&d(a,b),b},s.values=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},s.mapObject=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},s.pairs=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},s.functions=s.methods=function(a){var b=[];for(var c in a)s.isFunction(a[c])&&b.push(c);return b.sort()},s.extend=v(s.allKeys),s.extendOwn=s.assign=v(s.keys),s.findKey=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},s.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;s.isFunction(b)?(e=s.allKeys(g),d=t(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},s.omit=function(a,b,c){if(s.isFunction(b))b=s.negate(b);else{var d=s.map(C(arguments,!1,!1,1),String);b=function(a,b){return!s.contains(d,b)}}return s.pick(a,b,c)},s.defaults=v(s.allKeys,!0),s.create=function(a,b){var c=w(a);return b&&s.extendOwn(c,b),c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.tap=function(a,b){return b(a),a},s.isMatch=function(a,b){var c=s.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof s&&(a=a._wrapped),b instanceof s&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(s.isFunction(g)&&g instanceof g&&s.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=s.keys(a);if(i=k.length,s.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!s.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};s.isEqual=function(a,b){return G(a,b)},s.isEmpty=function(a){return null==a?!0:A(a)&&(s.isArray(a)||s.isString(a)||s.isArguments(a))?0===a.length:0===s.keys(a).length},s.isElement=function(a){return!(!a||1!==a.nodeType)},s.isArray=n||function(a){return"[object Array]"===l.call(a)},s.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){s["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return s.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(s.isFunction=function(a){return"function"==typeof a||!1}),s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!==+a},s.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===l.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return null!=a&&m.call(a,b)},s.noConflict=function(){return e._=f,this},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.noop=function(){},s.property=x,s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matcher=s.matches=function(a){return a=s.extendOwn({},a),function(b){return s.isMatch(b,a)}},s.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},s.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},s.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=s.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+s.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};s.escape=J(H),s.unescape=J(I),s.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),s.isFunction(d)?d.call(a):d};var K=0;s.uniqueId=function(a){var b=++K+"";return a?a+b:b},s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};s.template=function(a,b,c){!b&&c&&(b=c),b=s.defaults({},b,s.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,s)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},s.chain=function(a){var b=s(a);return b._chain=!0,b};var P=function(a,b){return a._chain?s(b).chain():b};s.mixin=function(a){s.each(s.functions(a),function(b){var c=s[b]=a[b];s.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P(this,c.apply(s,a))}})},s.mixin(s),s.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];s.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),s.each(["concat","join","slice"],function(a){var b=g[a];s.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),s.prototype.value=function(){return this._wrapped},s.prototype.valueOf=s.prototype.toJSON=s.prototype.value,s.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return s})}.call(this);